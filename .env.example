# =============================================================================
# TaskFlow Platform - Environment Variables
# =============================================================================
# Copy to .env and fill in your values:
#   cp .env.example .env
# =============================================================================

# =============================================================================
# REQUIRED (for both Local and Docker)
# =============================================================================

# OpenAI API Key - required for chat features
OPENAI_API_KEY=sk-your-openai-api-key

# Better Auth secret - generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=your-32-char-secret-here

# =============================================================================
# SSO PLATFORM (port 3001)
# =============================================================================

# Database for SSO (Neon recommended for local dev)
DATABASE_URL=postgresql://neondb_owner:xxx@ep-xxx.us-east-1.aws.neon.tech/taskflow?sslmode=require

# =============================================================================
# WEB DASHBOARD (port 3000)
# =============================================================================

# SSO Configuration
NEXT_PUBLIC_SSO_URL=http://localhost:3001
NEXT_PUBLIC_OAUTH_CLIENT_ID=taskflow-sso-public-client
NEXT_PUBLIC_OAUTH_REDIRECT_URI=http://localhost:3000/api/auth/callback
NEXT_PUBLIC_OAUTH_SCOPE=openid profile email

# API Configuration
NEXT_PUBLIC_API_URL=http://localhost:8000

# App Configuration
NEXT_PUBLIC_APP_NAME=TaskFlow Dashboard
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ChatKit Frontend
NEXT_PUBLIC_CHATKIT_DOMAIN_KEY=domain_pk_local_dev

# =============================================================================
# API SERVICE (port 8000)
# =============================================================================

# ChatKit Store - separate database for conversation history
TASKFLOW_CHATKIT_DATABASE_URL=postgresql+asyncpg://neondb_owner:xxx@ep-xxx.us-east-1.aws.neon.tech/chat?sslmode=require

# MCP Server URL
MCP_SERVER_URL=http://localhost:8001/mcp

# =============================================================================
# OPTIONAL - Email (for SSO email verification)
# =============================================================================

# SMTP Configuration
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
EMAIL_FROM=

# Or Resend API
RESEND_API_KEY=
RESEND_FROM_EMAIL=

# =============================================================================
# LOCAL DEVELOPMENT
# =============================================================================
#
# Terminal 1 - SSO:
#   cd sso-platform && pnpm dev
#
# Terminal 2 - API:
#   cd packages/api && uv run uvicorn taskflow_api.main:app --reload --port 8000
#
# Terminal 3 - MCP Server:
#   cd packages/mcp-server && uv run python -m taskflow_mcp.server
#
# Terminal 4 - Web Dashboard:
#   cd web-dashboard && pnpm dev
#
# Access:
#   - Dashboard: http://localhost:3000
#   - SSO: http://localhost:3001
#   - API: http://localhost:8000/docs
#   - MCP: http://localhost:8001/mcp
#
# =============================================================================
# DOCKER (optional - for containerized deployment)
# =============================================================================
#
# Additional vars for Docker (set if using docker compose):
#
#   # PostgreSQL password for local Docker postgres
#   POSTGRES_PASSWORD=postgres
#
# Start:
#   ./docker-start.sh
#   # Or: docker compose up -d --build
#
# Docker uses local postgres by default. To use external Neon for ChatKit:
#   Set TASKFLOW_CHATKIT_DATABASE_URL in .env (already set above)
#
# Docker networking is auto-configured in compose.yaml:
#   - Browser uses localhost (port mapping)
#   - Server-side uses container names (SERVER_API_URL, SERVER_SSO_URL)
#
# =============================================================================
